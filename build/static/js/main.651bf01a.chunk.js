(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,n){e.exports=n(62)},43:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(31),s=n.n(c),i=(n(43),n(44),n(11)),l=n(15),o=n(19),u=n(16),m=n(18),h=n(12),f=n(33),d=n.n(f),p=n(37),b=n(14),g=n.n(b),v=n(20),E=n(5),j=function(e){return{currentPage:e.pages.currentPage,searchString:e.search.searchString}},O="FETCH_FILMS_BY_SEARCH",y=function(e){return{type:O,searchString:e}},w="FETCH_NEXT_PAGE",S="FETCH_FILMS_FAILED",P={type:S},x="STOP_FETCHING",N={type:x},k="RECEIVE_FILMS",C=function(e,t){return{type:k,films:e,total:+t}},I="RECEIVE_NEXT_PAGE",T=function(e){return{type:I,films:e}},_=n(34),F=n.n(_),A=new function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;if(Object(i.a)(this,e),this.set=function(e,n){t.manageSize(),t[e]=n},this.get=function(e){return t[e]},this.manageSize=function(){t.queue.length>t.maxSize&&delete t[t.queue.shift()]},e.hasOwnProperty("instance"))return e.instance;this.queue=[],this.maxSize=n,Object.defineProperty(e,"instance",{value:this,enumerable:!1,writable:!1,configurable:!1})},R=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=F()(JSON.stringify(n)),c=A.get(a);return c?Promise.resolve(c):e.call.apply(e,[null].concat(n)).then(function(e){return A.set(a,e),Promise.resolve(e)})}},H="http://www.omdbapi.com/?apikey=".concat("1977b733"),G={method:"GET",headers:{Accept:"application/json"}},L=function(e){var t=e.status,n=e.statusText;return t&&200===t?Promise.resolve(e.json()):Promise.reject("".concat(t," error: ").concat(n))},M=function(e){return e.Error?Promise.reject(e.Error):Promise.resolve(e)},B=R(function(e){return fetch("".concat(H,"&").concat(e),G).then(L).then(M)}),D=R(function(e){return fetch("".concat(H,"&i=").concat(e),G).then(L).then(M)}),q=n(35),z=n.n(q),Y=3,J="CHANGE_SEARCH_STRING",W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return z.a.stringify({s:e,page:t})},Q=function(e){var t=e.type,n=e.searchString;return t===J&&n.length>=Y},V=function(e){var t=e.type,n=e.searchString;return t===J&&n.length<Y},X=function(e){var t=[];return e.reduce(function(e,n){return t.includes(n.imdbID)||(e.push(n),t.push(n.imdbID)),e},[])},U="SET_CURRENT_PAGE",$=function(e){return{type:U,page:e}},K=g.a.mark(ne),Z=g.a.mark(re),ee=g.a.mark(ae),te=g.a.mark(ce);function ne(e){var t,n,r;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(E.d)(200);case 3:return a.next=5,Object(E.e)(y(e));case 5:return a.next=7,Object(E.b)(B,W(e));case 7:return t=a.sent,n=t.Search,r=t.totalResults,a.next=12,Object(E.e)(C(X(n),r));case 12:a.next=19;break;case 14:return a.prev=14,a.t0=a.catch(0),console.warn(a.t0),a.next=19,Object(E.e)(P);case 19:return a.prev=19,a.t1=E.a,a.t2=[Object(E.e)($(1)),Object(E.e)(N)],a.t3=v.a,a.next=25,Object(E.c)();case 25:if(!a.sent){a.next=29;break}a.t4=[Object(E.e)(P)],a.next=30;break;case 29:a.t4=[];case 30:return a.t5=a.t4,a.t6=(0,a.t3)(a.t5),a.t7=a.t2.concat.call(a.t2,a.t6),a.next=35,(0,a.t1)(a.t7);case 35:return a.finish(19);case 36:case"end":return a.stop()}},K,null,[[0,14,19,36]])}function re(e){var t;return g.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.searchString,n.next=3,Object(E.f)({task:Object(E.b)(ne,t),cancel:Object(E.h)(V)});case 3:case"end":return n.stop()}},Z)}function ae(){var e,t,n,r,a;return g.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(E.g)(j);case 2:return e=c.sent,t=e.searchString,n=e.currentPage,c.prev=5,c.next=8,Object(E.b)(B,W(t,n+1));case 8:return r=c.sent,a=r.Search,c.next=12,Object(E.a)([Object(E.e)(T(a)),Object(E.e)($(n+1))]);case 12:c.next=19;break;case 14:return c.prev=14,c.t0=c.catch(5),console.warn(c.t0),c.next=19,Object(E.e)(P);case 19:return c.prev=19,c.next=22,Object(E.e)(N);case 22:return c.finish(19);case 23:case"end":return c.stop()}},ee,null,[[5,14,19,23]])}function ce(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)([Object(E.j)(Q,re),Object(E.i)(w,ae)]);case 2:case"end":return e.stop()}},te)}var se=ce,ie=n(13),le=n(10),oe={isProcessing:!1,films:[],total:0};var ue={currentPage:1,isProcessing:!1};var me={searchString:""};var he=n(64),fe=n(66),de=n(65),pe=(n(59),function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.searchString,n=e.handleSearchChange,r="form-control mr-sm-2 \n            ".concat(t.length&&t.length<Y?"is-invalid":"");return a.a.createElement("input",{type:"search",className:r,value:t,onChange:n,placeholder:"search","aria-label":"Search"})}}]),t}(r.PureComponent)),be=Object(h.b)(function(e){return{searchString:e.search.searchString}},function(e){return{handleSearchChange:function(t){var n=t.target.value;return e({type:J,searchString:n})}}})(pe),ge=(n(60),function(e){var t=e.radius,n=e.color;return a.a.createElement("div",{className:"Spinner m-3",style:{width:t,height:t,borderColor:n}})});ge.defaultProps={radius:25,color:"gray"};var ve=ge,Ee=n(63),je=function(e){var t=e.filmId,n=e.title,r=e.year,c=e.type;return a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-body py-2 px-3"},a.a.createElement("div",{className:"card-title d-flex justify-content-between"},a.a.createElement("h5",null,n),a.a.createElement("h5",{className:"text-muted mr-1"},r)),a.a.createElement("div",{className:"card-text d-flex justify-content-between"},a.a.createElement("p",null,"Feel free to click 'read more' and learn more about this ",c),a.a.createElement(Ee.a,{className:"btn btn-info",to:"/films/".concat(t)},"read more"))))},Oe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).renderShortQueryHint=function(){return a.a.createElement("p",null,"Your query must be at least ",Y," letters length.")},n.renderSummary=function(){var e=n.props,t=e.total,r=e.films,c=r?r.length:0;return a.a.createElement("p",null,c?"".concat(r.length," of ").concat(t," results are shown"):"Nothing was found")},n.renderFilms=function(){var e=n.props.films;return a.a.createElement("div",null,e.map(function(e){var t=e.Title,n=e.Year,r=e.Type,c=e.imdbID;return a.a.createElement(je,{key:c,title:t,year:n,type:r,filmId:c})}))},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.isProcessing?a.a.createElement(ve,null):a.a.createElement("div",null,a.a.createElement("div",{className:"text-muted mt-2"},this.props.searchString.length>=Y?this.renderSummary():this.renderShortQueryHint()),this.renderFilms())}}]),t}(r.PureComponent),ye=Object(h.b)(function(e){var t=e.films,n=t.films,r=t.total;return{films:n,isProcessing:t.isProcessing,searchString:e.search.searchString,total:r}})(Oe),we={fetchNextPage:function(){return{type:w}}},Se=Object(h.b)(function(e){return{isProcessing:e.pages.isProcessing}},we)(function(e){var t=e.fetchNextPage;return e.isProcessing?a.a.createElement(ve,null):a.a.createElement("button",{className:"btn btn-link my-2",onClick:t},"load more..")}),Pe=Object(h.b)(function(e){var t=e.films,n=t.films,r=t.total;return{allowLoadMore:!t.isProcessing&&r>n.length}})(function(e){var t=e.allowLoadMore;return a.a.createElement("div",{className:"container films-app mt-3"},a.a.createElement("h3",{className:"my-3 text-center"},"Films search app"),a.a.createElement(be,null),a.a.createElement(ye,null),t&&a.a.createElement(Se,null))}),xe=function(e){return a.a.createElement("div",{className:"alert alert-warning"},"Service is temporary unavailable")},Ne=function(e){return a.a.createElement("nav",null,a.a.createElement("ol",{className:"breadcrumb"},a.a.createElement("li",{className:"breadcrumb-item"},a.a.createElement(Ee.a,{to:"/"},"Home")),a.a.createElement("li",{className:"breadcrumb-item active"},"films")))},ke=function(e){var t=e.actors;return a.a.createElement("p",{className:"card-text"},t.split(",").map(function(e){return a.a.createElement("span",{key:e,className:"badge badge-light mr-1"},e)}))},Ce=function(e){var t=e.title,n=e.rating;return a.a.createElement("h4",{className:"card-title"},n&&a.a.createElement("span",{className:"badge badge-primary"},n,"\xa0"),a.a.createElement("span",{className:"p-1 ml-1"},t))},Ie=function(e){var t=e.Poster,n=e.Title,r=e.Actors,c=e.Country,s=e.Year,i=e.imdbRating,l=e.Genre,o=e.Plot;return a.a.createElement("div",{className:"card border-light shadow-lg bg-warning text-white"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-4"},a.a.createElement("img",{src:t,className:"card-img p-1",alt:n})),a.a.createElement("div",{className:"col-md-8"},a.a.createElement("div",{className:"card-body"},a.a.createElement(Ce,{title:n,rating:i}),a.a.createElement("h6",{className:"card-text text-muted"},c,", ",s),a.a.createElement("div",{className:"text-muted"},a.a.createElement("small",null,l)),a.a.createElement(ke,{actors:r}),a.a.createElement("p",{className:"card-text"},o)))))},Te=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={isProcessing:!1,data:{}},n.handleSuccessResponse=function(e){return n.setState({data:e,isProcessing:!1})},n.handleErrorResponse=function(e){console.warn(e),n.setState({isProcessing:!1})},n.renderFilmCardBody=function(e){return Object.keys(e).length?a.a.createElement(Ie,e):a.a.createElement(xe,null)},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState({isProcessing:!0}),D(this.props.filmId).then(this.handleSuccessResponse).catch(this.handleErrorResponse)}},{key:"render",value:function(){var e=this.state,t=e.isProcessing,n=e.data;return a.a.createElement("div",{className:"container films-app mt-4"},a.a.createElement(Ne,null),t?a.a.createElement(ve,null):this.renderFilmCardBody(n))}}]),t}(r.PureComponent),_e=Object(ie.c)({films:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(le.a)({},e,{isProcessing:!0});case k:return Object(le.a)({},e,{films:t.films,total:t.total});case I:return Object(le.a)({},e,{films:[].concat(Object(v.a)(e.films),Object(v.a)(t.films))});case S:return Object(le.a)({},e,{films:[]});case x:return Object(le.a)({},e,{isProcessing:!1});default:return e}},pages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(le.a)({},e,{isProcessing:!0});case U:return Object(le.a)({},e,{currentPage:t.page});case I:return Object(le.a)({},e,{isProcessing:!1});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(le.a)({},e,{searchString:t.searchString});default:return e}}}),Fe=Object(p.a)(),Ae=Object(ie.e)(_e,Object(ie.a)(Fe,d.a));Fe.run(se);var Re=function(e){return a.a.createElement("h1",null,"Wrong url, dude!")},He=function(e){var t=e.match.params.id;return a.a.createElement(Te,{filmId:t})},Ge=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(h.a,{store:Ae},a.a.createElement(he.a,null,a.a.createElement(fe.a,null,a.a.createElement(de.a,{path:"/",exact:!0,component:Pe}),a.a.createElement(de.a,{path:"/films/:id",component:He}),a.a.createElement(de.a,{component:Re})))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(Ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.651bf01a.chunk.js.map